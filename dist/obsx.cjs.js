"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const f=Symbol("info"),p=(e,t)=>{do t(e);while(e=e[f].prev)};exports.ignored=!1;function w(e){let t=exports.ignored;exports.ignored=!0,e(),exports.ignored=t}function c(e,t,r,n=[]){if(!exports.ignored)for(let o of t[f][e].keys())n.includes(o)||(o(...r),n.push(o))}function b(e,t,r){let n=t[f][e];return n.set(r,0),()=>n.delete(r)}function a(e,t){let r=[];return p(e,n=>r.push(b("set",n,t))),()=>r.forEach(n=>n())}exports.use=()=>{};function g(e){let t=[],r=()=>{for(let o of t)o();t=[];let n=exports.use;exports.use=o=>t.push(a(o,r)),e(),exports.use=n};r()}function m(e){let t=[e],r=()=>t;return v(r,r,r)[0]}function v(e,t,r,n){return r[f]={prev:n,call:new Map,set:new Map},new Proxy(Object.defineProperty(r,"$",{get:e,set:t}),{get(o,i,h){if(i in r)return r[i];let s=v(()=>{var u;return exports.use(s),(u=e())==null?void 0:u[i]},u=>{e()[i]=u;let l=[];p(s,d=>c("set",d,[],l))},(...u)=>{var d;exports.use(s);let l=(d=e())==null?void 0:d[i](...u);return c("call",s,[u,l]),l},h);return r[i]=s}})}exports.bubble=p;exports.emit=c;exports.ignore=w;exports.info=f;exports.observe=m;exports.on=b;exports.run=g;exports.watch=a;
